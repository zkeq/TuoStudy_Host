"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6680],{4872:function(e,t,r){var n=r(61176),a=r(60385),o=r(4313),i=r(4637),s=function(){var e=(0,o.$G)().t;return(0,i.jsx)(n.default,{href:"/",children:(0,i.jsxs)("a",{className:"flex items-center",children:[(0,i.jsx)(a.G,{className:"h-3 w-3",icon:["far","flag"]}),(0,i.jsx)("span",{className:"ml-2 font-medium",children:e("Home")})]})})};t.Z=function(e){var t=e.query;if(t){var r=t.path;if(Array.isArray(r))return(0,i.jsxs)("ol",{className:"no-scrollbar inline-flex flex-row-reverse items-center gap-1 overflow-x-scroll text-sm text-gray-600 dark:text-gray-300 md:gap-3",children:[r.slice(0).reverse().map((function(e,t){return(0,i.jsxs)("li",{className:"flex flex-shrink-0 items-center",children:[(0,i.jsx)(a.G,{className:"h-3 w-3",icon:"angle-right"}),(0,i.jsx)(n.default,{href:"/".concat(r.slice(0,r.length-t).map((function(e){return encodeURIComponent(e)})).join("/")),passHref:!0,children:(0,i.jsx)("a",{className:"ml-1 transition-all duration-75 hover:opacity-70 md:ml-3 ".concat(0==t&&"pointer-events-none opacity-80"),children:e})})]},t)})),(0,i.jsx)("li",{className:"flex-shrink-0 transition-all duration-75 hover:opacity-80",children:(0,i.jsx)(s,{})})]})}return(0,i.jsx)("div",{className:"text-sm text-gray-600 transition-all duration-75 hover:opacity-80 dark:text-gray-300",children:(0,i.jsx)(s,{})})}},86851:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(59496),a=r(4313),o=r(74792),i=r(17744),s=r(60385),c=r(28089),l=r(72408),d=r(12461),u=r(16767),p=r(4637);function x(e){var t=e.title,r=e.value,n=(0,c.useClipboard)({copiedTimeout:1e3});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h4",{className:"py-2 text-xs font-medium uppercase tracking-wider",children:t}),(0,p.jsxs)("div",{className:"group relative mb-2 max-h-24 overflow-y-scroll break-all rounded border border-gray-400/20 bg-gray-50 p-2.5 font-mono dark:bg-gray-800",children:[(0,p.jsx)("div",{className:"opacity-80",children:r}),(0,p.jsx)("button",{onClick:function(){return n.copy(r)},className:"absolute top-[0.2rem] right-[0.2rem] w-8 rounded border border-gray-400/40 bg-gray-100 py-1.5 opacity-0 transition-all duration-100 hover:bg-gray-200 group-hover:opacity-100 dark:bg-gray-850 dark:hover:bg-gray-700",children:n.copied?(0,p.jsx)(s.G,{icon:"check"}):(0,p.jsx)(s.G,{icon:"copy"})})]})]})}function f(e){var t=e.path,r=e.menuOpen,s=e.setMenuOpen,c=(0,a.$G)().t,f=(0,d.hV)(t),h=(0,n.useRef)(null),m=(0,u.I)(t),g=m.substring(m.lastIndexOf("/")+1),v=(0,n.useState)(g),y=v[0],j=v[1];return(0,p.jsx)(o.u,{appear:!0,show:r,as:n.Fragment,children:(0,p.jsx)(i.V,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:function(){return s(!1)},initialFocus:h,children:(0,p.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[(0,p.jsx)(o.u.Child,{as:n.Fragment,enter:"ease-out duration-100",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,p.jsx)(i.V.Overlay,{className:"fixed inset-0 bg-white/60 dark:bg-gray-800/60"})}),(0,p.jsx)("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"\u200b"}),(0,p.jsx)(o.u.Child,{as:n.Fragment,enter:"ease-out duration-100",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-100",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,p.jsxs)("div",{className:"inline-block max-h-[80vh] w-full max-w-3xl transform overflow-hidden overflow-y-scroll rounded border border-gray-400/30 bg-white p-4 text-left align-middle text-sm shadow-xl transition-all dark:bg-gray-900 dark:text-white",children:[(0,p.jsx)(i.V.Title,{as:"h3",className:"py-2 text-xl font-bold",children:c("Customise direct link")}),(0,p.jsxs)(i.V.Description,{as:"p",className:"py-2 opacity-80",children:[c("Change the raw file direct link to a URL ending with the extension of the file.")," ",(0,p.jsx)("a",{href:"https://ovi.swo.moe/docs/features/customise-direct-link",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 underline",children:c("What is this?")})]}),(0,p.jsxs)("div",{className:"mt-4",children:[(0,p.jsx)("h4",{className:"py-2 text-xs font-medium uppercase tracking-wider",children:c("Filename")}),(0,p.jsx)("input",{className:"mb-2 w-full rounded border border-gray-600/10 p-2.5 font-mono focus:outline-none focus:ring focus:ring-blue-300 dark:bg-gray-600 dark:text-white dark:focus:ring-blue-700",ref:h,value:y,onChange:function(e){return j(e.target.value)}}),(0,p.jsx)(x,{title:c("Default"),value:"".concat((0,l.S)(),"/api/raw/?path=").concat(m).concat(f?"&odpt=".concat(f):"")}),(0,p.jsx)(x,{title:c("URL encoded"),value:"".concat((0,l.S)(),"/api/raw/?path=").concat(t).concat(f?"&odpt=".concat(f):"")}),(0,p.jsx)(x,{title:c("Customised"),value:"".concat((0,l.S)(),"/api/name/").concat(y,"/?path=").concat(m).concat(f?"&odpt=".concat(f):"")}),(0,p.jsx)(x,{title:c("Customised and encoded"),value:"".concat((0,l.S)(),"/api/name/").concat(y,"/?path=").concat(t).concat(f?"&odpt=".concat(f):"")})]})]})})]})})})}},46784:function(e,t,r){r.d(t,{o:function(){return h}});var n=r(59496),a=r(60385),o=r(70646),i=r(28089),s=r(4313),c=r(40632),l=r(41999),d=r(72408),u=r(12461),p=r(86851),x=r(4637),f=function(e){var t={gray:"hover:text-gray-600 dark:hover:text-white focus:ring-gray-200 focus:text-gray-600 dark:focus:text-white border-gray-300 dark:border-gray-500 dark:focus:ring-gray-500",blue:"hover:text-blue-600 focus:ring-blue-200 focus:text-blue-600 border-blue-300 dark:border-blue-700 dark:focus:ring-blue-500",teal:"hover:text-teal-600 focus:ring-teal-200 focus:text-teal-600 border-teal-300 dark:border-teal-700 dark:focus:ring-teal-500",red:"hover:text-red-600 focus:ring-red-200 focus:text-red-600 border-red-300 dark:border-red-700 dark:focus:ring-red-500",green:"hover:text-green-600 focus:ring-green-200 focus:text-green-600 border-green-300 dark:border-green-700 dark:focus:ring-green-500",pink:"hover:text-pink-600 focus:ring-pink-200 focus:text-pink-600 border-pink-300 dark:border-pink-700 dark:focus:ring-pink-500",yellow:"hover:text-yellow-400 focus:ring-yellow-100 focus:text-yellow-400 border-yellow-300 dark:border-yellow-400 dark:focus:ring-yellow-300"};return e?t[e]:t.gray},h=function(e){var t=e.onClickCallback,r=e.btnColor,n=e.btnText,o=e.btnIcon,i=e.btnImage,s=e.btnTitle;return(0,x.jsxs)("button",{className:"flex items-center space-x-2 rounded-lg border bg-white py-2 px-4 text-sm font-medium text-gray-900 hover:bg-gray-100/10 focus:z-10 focus:ring-2 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 ".concat(f(r)),title:s,onClick:t,children:[o&&(0,x.jsx)(a.G,{icon:o}),i&&(0,x.jsx)(c.default,{src:i,alt:i,width:20,height:20,priority:!0}),(0,x.jsx)("span",{children:n})]})};t.Z=function(){var e=(0,l.useRouter)().asPath,t=(0,u.hV)(e),r=(0,i.useClipboard)(),a=(0,n.useState)(!1),c=a[0],f=a[1],m=(0,s.$G)().t;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(p.Z,{menuOpen:c,setMenuOpen:f,path:e}),(0,x.jsxs)("div",{className:"flex flex-wrap justify-center gap-2",children:[(0,x.jsx)(h,{onClickCallback:function(){return window.open("/api/raw/?path=".concat(e).concat(t?"&odpt=".concat(t):""))},btnColor:"blue",btnText:m("Download"),btnIcon:"file-download",btnTitle:m("Download the file directly through OneDrive")}),(0,x.jsx)(h,{onClickCallback:function(){r.copy("".concat((0,d.S)(),"/api/raw/?path=").concat(e).concat(t?"&odpt=".concat(t):"")),o.ZP.success(m("Copied direct link to clipboard."))},btnColor:"pink",btnText:m("Copy direct link"),btnIcon:"copy",btnTitle:m("Copy the permalink to the file to the clipboard")}),(0,x.jsx)(h,{onClickCallback:function(){return f(!0)},btnColor:"teal",btnText:m("Customise link"),btnIcon:"pen"})]})]})}},83307:function(e,t,r){r.d(t,{Yi:function(){return Qe},fh:function(){return Xe},ys:function(){return et},ZP:function(){return tt}});var n=r(48971),a=r(320),o=r(19922),i=r(43226),s=r(32298),c=r(86272),l=r(42818),d=r.n(l),u=r(59496),p=r(60385),x=r(70646),f=r(17141),h=r.n(f),m=r(25526),g=r(41999),v=r(4313),y=r(18318),j=r(32282),b="markdown",w="image",k="text",N="pdf",C="code",Z="video",S="audio",P="ms-office",O="epub",R="url",F={gif:w,jpeg:w,jpg:w,png:w,webp:w,md:b,markdown:b,mdown:b,pdf:N,doc:P,docx:P,ppt:P,pptx:P,xls:P,xlsx:P,c:C,cpp:C,js:C,jsx:C,java:C,sh:C,cs:C,py:C,css:C,html:C,ts:C,tsx:C,rs:C,vue:C,json:C,yml:C,yaml:C,toml:C,txt:k,vtt:k,srt:k,log:k,diff:k,mp4:Z,flv:Z,webm:Z,m3u8:Z,mkv:Z,mov:Z,avi:Z,mp3:S,m4a:S,aac:S,wav:S,ogg:S,oga:S,opus:S,flac:S,epub:O,url:R};function G(e){var t=(0,j.RT)(e);switch(t){case"ts":case"tsx":return"typescript";case"rs":return"rust";case"js":case"jsx":return"javascript";case"sh":return"shell";case"cs":return"csharp";case"py":return"python";case"yml":return"yaml";default:return t}}var I=r(90779),T=r(12461),L=r(83242),E=r(15873),D=r(29597),U=r.n(D),M=r(4637);function z(e){var t=e.router,r=e.progress,n=(0,v.$G)().t;return(0,M.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,M.jsxs)("div",{className:"w-56",children:[(0,M.jsx)("span",{children:r?n("Downloading {{progress}}%",{progress:r}):n("Downloading selected files...")}),(0,M.jsx)("div",{className:"relative mt-2",children:(0,M.jsx)("div",{className:"flex h-1 overflow-hidden rounded bg-gray-100",children:(0,M.jsx)("div",{style:{width:"".concat(r,"%")},className:"bg-gray-500 text-white transition-all duration-100"})})})]}),(0,M.jsx)("button",{className:"rounded bg-red-500 p-2 text-white hover:bg-red-400 focus:outline-none focus:ring focus:ring-red-300",onClick:function(){return t.reload()},children:n("Cancel")})]})}function $(e){var t=e.blob,r=e.name,n=document.createElement("a");n.style.display="none",document.body.appendChild(n);var a=window.URL.createObjectURL(t);n.href=a,n.download=r,n.click(),window.URL.revokeObjectURL(a),n.remove()}function V(){return(V=(0,L.Z)(d().mark((function e(t){var r,n,a,o,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.toastId,n=t.router,a=t.files,o=t.folder,i=new(U()),s=o?i.folder(o):i,a.forEach((function(e){var t=e.name,r=e.url;s.file(t,fetch(r).then((function(e){return e.blob()})))})),e.next=6,i.generateAsync({type:"blob"},(function(e){x.ZP.loading((0,M.jsx)(z,{router:n,progress:e.percent.toFixed(0)}),{id:r})}));case 6:$({blob:e.sent,name:o?o+".zip":"download.zip"});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return H.apply(this,arguments)}function H(){return(H=(0,s.Z)(d().mark((function e(t){var r,n,a,o,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,T.hV)(t),a=[(n=function(){var e=(0,L.Z)(d().mark((function e(t,n,a){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=n,e.next=4,(0,I._)(a?"/api/?path=".concat(n,"&next=").concat(a):"/api?path=".concat(n),null!==r&&void 0!==r?r:void 0).catch((function(e){return{i:t,path:n,error:e}}));case 4:return e.t2=e.sent,e.abrupt("return",{i:e.t0,path:e.t1,data:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}())(0,t)],o={},s=d().mark((function e(){var t,r,s,l,u,p,x,f,h,m,g,v,y;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,e.prev=1,e.next=4,(0,i.Z)(Promise.race(a.filter((function(){return!0}))));case 4:t=e.sent,e.next=18;break;case 7:if(e.prev=7,e.t0=e.catch(1),r=e.t0.i,s=e.t0.path,l=e.t0.error,4!==Math.floor(l.status/100)){e.next=17;break}return delete a[r],e.next=14,{path:s,meta:{},isFolder:!0,error:{status:l.status,message:l.message.error}};case 14:return e.abrupt("return","continue");case 17:throw e.t0;case 18:if(p=(u=t).i,x=u.path,(f=u.data)&&f.folder){e.next=21;break}throw new Error("Path is not folder");case 21:if(delete a[p],h=f.folder.value.map((function(e){return{path:"".concat("/"===x?"":x,"/").concat(encodeURIComponent(e.name)),meta:e,isFolder:Boolean(e.folder)}})),!f.next){e.next=29;break}o[x]=(null!==(m=o[x])&&void 0!==m?m:[]).concat(h),g=a.length,a[g]=n(g,x,f.next),e.next=33;break;case 29:return y=(null!==(v=o[x])&&void 0!==v?v:[]).concat(h),o[x]&&delete o[x],y.filter((function(e){return e.isFolder})).forEach((function(e){var t=a.length;a[t]=n(t,e.path)})),e.delegateYield((0,E.Z)((0,c.Z)(y),i.Z),"t1",33);case 33:case"end":return e.stop()}}),e,null,[[1,7]])}));case 5:if(!(a.filter((function(){return!0})).length>0)){e.next=12;break}return e.delegateYield(s(),"t0",7);case 7:if("continue"!==e.t0){e.next=10;break}return e.abrupt("continue",5);case 10:e.next=5;break;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=r(48099),B=r(26362),_=r(33999),q=function(e){e.errorMsg;return(0,M.jsx)("div",{className:"my-12",children:(0,M.jsx)(_.default,{src:"/js.js"})})},Y=r(40632),J=function(e){var t=e.redirect,r=(0,T.ss)(t),n=(0,g.useRouter)(),a=(0,u.useState)(""),i=a[0],s=a[1],c=(0,y.Z)(r,""),l=(0,o.Z)(c,2),d=(l[0],l[1]),x=(0,v.$G)().t;return(0,M.jsxs)("div",{className:"mx-auto flex max-w-sm flex-col space-y-4 md:my-10",children:[(0,M.jsx)("div",{className:"mx-auto w-3/4 md:w-5/6",children:(0,M.jsx)(Y.default,{src:"/images/fabulous-wapmire-weekdays.png",alt:"authenticate",width:912,height:912,priority:!0})}),(0,M.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:x("Enter Password")}),(0,M.jsx)("p",{className:"text-sm font-medium text-gray-500",children:x("This route (the folder itself and the files inside) is password protected. ")+x("If you know the password, please enter it below.")}),(0,M.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,M.jsx)("input",{className:"flex-1 rounded border border-gray-600/10 p-2 font-mono focus:outline-none focus:ring focus:ring-blue-300 dark:bg-gray-600 dark:text-white dark:focus:ring-blue-700",autoFocus:!0,type:"password",placeholder:"************",value:i,onChange:function(e){s(e.target.value)},onKeyPress:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(d(i),n.reload())}}),(0,M.jsx)("button",{className:"rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-500 focus:outline-none focus:ring focus:ring-blue-400",onClick:function(){d(i),n.reload()},children:(0,M.jsx)(p.G,{icon:"arrow-right"})})]})]})},K=r(46784),X=r(72698),Q=r.n(X);function ee(e,t){var r=(0,u.useState)(""),n=r[0],a=r[1],o=(0,u.useState)(!0),i=o[0],s=o[1],c=(0,u.useState)(""),l=c[0],p=c[1];return(0,u.useEffect)((function(){var r=(0,T.hV)(t),n=e+(r?"&odpt=".concat(r):"");Q().get(n,{responseType:"blob"}).then(function(){var e=(0,L.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,t.data.text();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return p(e.message)})).finally((function(){return s(!1)}))}),[e,t]),{response:n,error:l,validating:i}}var te=r(72364),re=function(e){e.file;var t=(0,g.useRouter)().asPath,r=(0,v.$G)().t,n=ee("/api/raw/?path=".concat(t),t),a=n.response,o=n.error,i=n.validating;return o?(0,M.jsx)(te.p,{children:(0,M.jsx)(q,{errorMsg:o})}):i?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(te.p,{children:(0,M.jsx)(B.Z,{loadingText:r("Loading file content...")})}),(0,M.jsx)(te.W,{children:(0,M.jsx)(K.Z,{})})]}):a?(0,M.jsxs)("div",{children:[(0,M.jsx)(te.p,{children:(0,M.jsx)("pre",{className:"overflow-x-scroll p-0 text-sm md:p-3",children:a})}),(0,M.jsx)(te.W,{children:(0,M.jsx)(K.Z,{})})]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(te.p,{children:(0,M.jsx)(q,{errorMsg:r("File is empty.")})}),(0,M.jsx)(te.W,{children:(0,M.jsx)(K.Z,{})})]})},ne=r(55066),ae=r(41423),oe=r(27862),ie=r(75958),se=r(96654),ce=r(19431),le=r(54855),de=r(88357),ue=(r(29513),["className","children","inline"]);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fe,he=function(e){var t=e.file,r=e.path,n=e.standalone,a=void 0===n||n,o=e.proxy,i=void 0!==o&&o,s=a?r.substring(0,r.lastIndexOf("/")):r,c=ee("/api/raw/?path=".concat(s,"/").concat(t.name).concat(i?"&proxy=true":""),r),l=c.response,d=c.error,u=c.validating,p=(0,v.$G)().t,x={img:function(e){var t,r=e.alt,n=e.src,a=e.title,o=e.width,i=e.height,c=e.style;return(0,M.jsx)("img",{alt:r,src:(t=n,t.indexOf("://")>0||0===t.indexOf("//")?n:"/api/?path=".concat(s,"/").concat(n,"&raw=true")),title:a,width:o,height:i,style:c})},code:function(e){var t=e.className,r=e.children,n=e.inline,a=(0,ne.Z)(e,ue);if(n)return(0,M.jsx)("code",xe(xe({className:t},a),{},{children:r}));var o=/language-(\w+)/.exec(t||"");return(0,M.jsx)(le.Z,xe(xe({language:o?o[1]:"language-text",style:de.h5,PreTag:"div"},a),{},{children:String(r).replace(/\n$/,"")}))}};return d?(0,M.jsx)(te.p,{children:(0,M.jsx)(q,{errorMsg:d})}):u?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(te.p,{children:(0,M.jsx)(B.Z,{loadingText:p("Loading file content...")})}),a&&(0,M.jsx)(te.W,{children:(0,M.jsx)(K.Z,{})})]}):(0,M.jsxs)("div",{children:[(0,M.jsx)(te.p,{children:(0,M.jsx)("div",{className:"markdown-body",children:(0,M.jsx)(ae.D,{remarkPlugins:[oe.Z,ie.Z],rehypePlugins:[se.Z,ce.Z],components:x,children:l})})}),a&&(0,M.jsx)(te.W,{children:(0,M.jsx)(K.Z,{})})]})},me=r(35784),ge=function(e){var t=e.file,r=(0,g.useRouter)().asPath,n=ee("/api/raw/?path=".concat(r),r),a=n.response,o=n.error,i=n.validating,s=(0,me.Z)("dark"),c=(0,v.$G)().t;return o?(0,M.jsx)(te.p,{children:(0,M.jsx)(q,{errorMsg:o})}):i?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(te.p,{children:(0,M.jsx)(B.Z,{loadingText:c("Loading file content...")})}),(0,M.jsx)(te.W,{children:(0,M.jsx)(K.Z,{})})]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(te.p,{children:(0,M.jsx)(le.Z,{language:G(t.name),style:"dark"===s?de.A1:de.Ro,children:a})}),(0,M.jsx)(te.W,{children:(0,M.jsx)(K.Z,{})})]})},ve=r(43578),ye=r(72408),je=function(e){e.file;var t=(0,g.useRouter)().asPath,r=(0,T.hV)(t),n=(0,u.useRef)(null),a=(0,u.useState)(600),o=a[0],i=a[1],s=encodeURIComponent("".concat((0,ye.S)(),"/api/raw/?path=").concat(t).concat(r?"&odpt=".concat(r):""));return(0,u.useEffect)((function(){i(n.current?n.current.offsetWidth:600)}),[]),(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{className:"overflow-scroll",ref:n,style:{maxHeight:"90vh"},children:(0,M.jsx)(ve.Z,{url:s,width:o.toString(),height:"600"})}),(0,M.jsx)(te.W,{children:(0,M.jsx)(K.Z,{})})]})},be=r(7948),we=r.n(be),ke=r(51722),Ne=r.n(ke),Ce=r(6985),Ze=r.n(Ce),Se=function(e){if(e<1024)return e+" B";var t=Math.floor(Math.log(e)/Math.log(1024)),r=e/Math.pow(1024,t),n=Math.round(r),a=n<10?r.toFixed(2):n<100?r.toFixed(1):n;return"".concat(a," ").concat("KMGTPEZY"[t-1],"B")},Pe=function(e){return Ne()(e).format(Ze().datetimeFormat)};!function(e){e[e.Loading=0]="Loading",e[e.Ready=1]="Ready",e[e.Playing=2]="Playing",e[e.Paused=3]="Paused"}(fe||(fe={}));var Oe=function(e){var t=e.file,r=(0,v.$G)().t,n=(0,g.useRouter)().asPath,a=(0,T.hV)(n),o=(0,u.useRef)(null),i=(0,u.useState)(fe.Loading),s=i[0],c=i[1],l="/api/thumbnail/?path=".concat(n,"&size=medium").concat(a?"&odpt=".concat(a):""),d=(0,u.useState)(!1),x=d[0],f=d[1];return(0,u.useEffect)((function(){var e=o.current.audioEl.current;e&&(e.oncanplay=function(){return c(fe.Ready)},e.onended=function(){return c(fe.Paused)},e.onpause=function(){return c(fe.Paused)},e.onplay=function(){return c(fe.Playing)},e.onplaying=function(){return c(fe.Playing)},e.onseeking=function(){return c(fe.Loading)},e.onwaiting=function(){return c(fe.Loading)},e.onerror=function(){return c(fe.Paused)})}),[]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(te.p,{children:(0,M.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:space-x-4",children:[(0,M.jsxs)("div",{className:"relative flex aspect-square w-full items-center justify-center rounded bg-gray-100 transition-all duration-75 dark:bg-gray-700 md:w-48",children:[(0,M.jsx)("div",{className:"absolute z-20 flex h-full w-full items-center justify-center transition-all duration-300 ".concat(s===fe.Loading?"bg-white opacity-80 dark:bg-gray-800":"bg-transparent opacity-0"),children:(0,M.jsx)(B.H,{className:"z-10 inline-block h-5 w-5 animate-spin"})}),x?(0,M.jsx)(p.G,{className:"z-10 h-5 w-5 ".concat(s===fe.Playing?"animate-spin":""),icon:"music",size:"2x"}):(0,M.jsx)("div",{className:"absolute m-4 rounded-full shadow-lg",children:(0,M.jsx)("img",{className:"h-full w-full rounded-full object-cover object-top ".concat(s===fe.Playing?"animate-spin-slow":""),src:l,alt:t.name,onError:function(){return f(!0)}})})]}),(0,M.jsxs)("div",{className:"flex w-full flex-col justify-between",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{className:"mb-2 font-medium",children:t.name}),(0,M.jsx)("div",{className:"mb-4 text-sm text-gray-500",children:r("Last modified:")+" "+Pe(t.lastModifiedDateTime)})]}),(0,M.jsx)(we(),{className:"h-11 w-full",src:"/api/raw/?path=".concat(n).concat(a?"&odpt=".concat(a):""),ref:o,controls:!0,preload:"auto"})]})]})}),(0,M.jsx)(te.W,{children:(0,M.jsx)(K.Z,{})})]})},Re=r(23926),Fe=r(14870),Ge=r(28089),Ie=r(86851),Te=(r(59614),function(e){var t=e.videoName,r=e.videoUrl,n=e.width,a=e.height,o=e.thumbnail,i=e.subtitle,s=e.isFlv,c=e.mpegts;(0,u.useEffect)((function(){if(Q().get(i,{responseType:"blob"}).then((function(e){var t=document.querySelector("track");null===t||void 0===t||t.setAttribute("src",URL.createObjectURL(e.data))})).catch((function(){console.log("Could not load subtitle.")})),s){!function(){var e=document.getElementById("plyr"),t=c.createPlayer({url:r,type:"flv"});t.attachMediaElement(e),t.load()}()}}),[r,s,c,i]);var l={type:"video",title:t,poster:o,tracks:[{kind:"captions",label:t,src:"",default:!0}]},d={ratio:"".concat(null!==n&&void 0!==n?n:16,":").concat(null!==a&&void 0!==a?a:9)};return s||(l.sources=[{src:r}]),(0,M.jsx)(Re.Z,{id:"plyr",source:l,options:d})}),Le=function(e){var t,n,a=e.file,o=(0,g.useRouter)().asPath,i=(0,T.hV)(o),s=(0,Ge.useClipboard)(),c=(0,u.useState)(!1),l=c[0],p=c[1],f=(0,v.$G)().t,h="/api/thumbnail/?path=".concat(o,"&size=large").concat(i?"&odpt=".concat(i):""),m="".concat(o.substring(0,o.lastIndexOf(".")),".vtt"),y="/api/raw/?path=".concat(m).concat(i?"&odpt=".concat(i):""),b="/api/raw/?path=".concat(o).concat(i?"&odpt=".concat(i):""),w="flv"===(0,j.RT)(a.name),k=(0,Fe.r5)((0,L.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=4;break}return e.next=3,r.e(6425).then(r.t.bind(r,88598,23));case 3:return e.abrupt("return",e.sent.default);case 4:case"end":return e.stop()}}),e)}))),[w]),N=k.loading,C=k.error,Z=k.result;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Ie.Z,{path:o,menuOpen:l,setMenuOpen:p}),(0,M.jsx)(te.p,{children:C?(0,M.jsx)(q,{errorMsg:C.message}):N&&w?(0,M.jsx)(B.Z,{loadingText:f("Loading FLV extension...")}):(0,M.jsx)(Te,{videoName:a.name,videoUrl:b,width:null===(t=a.video)||void 0===t?void 0:t.width,height:null===(n=a.video)||void 0===n?void 0:n.height,thumbnail:h,subtitle:y,isFlv:w,mpegts:Z})}),(0,M.jsx)(te.W,{children:(0,M.jsxs)("div",{className:"flex flex-wrap justify-center gap-2",children:[(0,M.jsx)(K.o,{onClickCallback:function(){return window.open(b)},btnColor:"blue",btnText:f("Download"),btnIcon:"file-download"}),(0,M.jsx)(K.o,{onClickCallback:function(){s.copy("".concat((0,ye.S)(),"/api/raw/?path=").concat(o).concat(i?"&odpt=".concat(i):"")),x.ZP.success(f("Copied direct link to clipboard."))},btnColor:"pink",btnText:f("Copy direct link"),btnIcon:"copy"}),(0,M.jsx)(K.o,{onClickCallback:function(){return p(!0)},btnColor:"teal",btnText:f("Customise link"),btnIcon:"pen"}),(0,M.jsx)(K.o,{onClickCallback:function(){return window.open("iina://weblink?url=".concat((0,ye.S)()).concat(b))},btnText:"IINA",btnImage:"/players/iina.png"}),(0,M.jsx)(K.o,{onClickCallback:function(){return window.open("vlc://".concat((0,ye.S)()).concat(b))},btnText:"VLC",btnImage:"/players/vlc.png"}),(0,M.jsx)(K.o,{onClickCallback:function(){return window.open("potplayer://".concat((0,ye.S)(),"/").concat(b))},btnText:"PotPlayer",btnImage:"/players/potplayer.png"})]})})]})},Ee=function(e){e.file;var t=(0,g.useRouter)().asPath,r=(0,T.hV)(t),n=encodeURIComponent("".concat((0,ye.S)(),"/api/raw/?path=").concat(t).concat(r?"&odpt=".concat(r):"")),a="https://pdf.zkeq.xyz/?file=".concat(n);return(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{className:"w-full overflow-hidden rounded",style:{height:"90vh"},children:(0,M.jsx)("iframe",{src:a,frameBorder:"0",width:"100%",height:"100%"})}),(0,M.jsx)(te.W,{children:(0,M.jsx)(K.Z,{})})]})},De=function(e){var t;return null===(t=e.split("\n").find((function(e){return e.startsWith("URL=")})))||void 0===t?void 0:t.split("=")[1]},Ue=function(e){e.file;var t,r=(0,g.useRouter)().asPath,n=(0,v.$G)().t,a=ee("/api/raw/?path=".concat(r),r),o=a.response,i=a.error,s=a.validating;return i?(0,M.jsx)(te.p,{children:(0,M.jsx)(q,{errorMsg:i})}):s?(0,M.jsx)(te.p,{children:(0,M.jsx)(B.Z,{loadingText:n("Loading file content...")})}):o?(0,M.jsxs)("div",{children:[(0,M.jsx)(te.p,{children:(0,M.jsx)("pre",{className:"overflow-x-scroll p-0 text-sm md:p-3",children:o})}),(0,M.jsx)(te.W,{children:(0,M.jsx)("div",{className:"flex justify-center",children:(0,M.jsx)(K.o,{onClickCallback:function(){var e;return window.open(null!==(e=De(o))&&void 0!==e?e:"")},btnColor:"blue",btnText:n("Open URL"),btnIcon:"external-link-alt",btnTitle:n("Open URL{{url}}",{url:null!==(t=" "+De(o))&&void 0!==t?t:""})})})})]}):(0,M.jsx)(te.p,{children:(0,M.jsx)(q,{errorMsg:n("File is empty.")})})},Me=function(e){var t,r,n=e.file,a=(0,g.useRouter)().asPath,o=(0,T.hV)(a);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(te.p,{children:(0,M.jsx)("img",{className:"mx-auto",src:"/api/raw/?path=".concat(a).concat(o?"&odpt=".concat(o):""),alt:n.name,width:null===(t=n.image)||void 0===t?void 0:t.width,height:null===(r=n.image)||void 0===r?void 0:r.height})}),(0,M.jsx)(te.W,{children:(0,M.jsx)(K.Z,{})})]})},ze=function(e){var t,r,n,a,o,i,s,c,l=e.file,d=(0,v.$G)().t;return(0,M.jsxs)("div",{children:[(0,M.jsx)(te.p,{children:(0,M.jsxs)("div",{className:"items-center px-5 py-4 md:flex md:space-x-8",children:[(0,M.jsxs)("div",{className:"rounded-lg border border-gray-900/10 px-8 py-20 text-center dark:border-gray-500/30",children:[(0,M.jsx)(p.G,{icon:(0,j.LP)(l.name,{video:Boolean(l.video)})}),(0,M.jsx)("div",{className:"mt-6 text-sm font-medium line-clamp-3 md:w-28",children:l.name})]}),(0,M.jsxs)("div",{className:"flex flex-col space-y-2 py-4 md:flex-1",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{className:"py-2 text-xs font-medium uppercase opacity-80",children:d("Last modified")}),(0,M.jsx)("div",{children:Pe(l.lastModifiedDateTime)})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{className:"py-2 text-xs font-medium uppercase opacity-80",children:d("File size")}),(0,M.jsx)("div",{children:Se(l.size)})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{className:"py-2 text-xs font-medium uppercase opacity-80",children:d("MIME type")}),(0,M.jsx)("div",{children:null!==(t=null===(r=l.file)||void 0===r?void 0:r.mimeType)&&void 0!==t?t:d("Unavailable")})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{className:"py-2 text-xs font-medium uppercase opacity-80",children:d("Hashes")}),(0,M.jsx)("table",{className:"block w-full overflow-scroll whitespace-nowrap text-sm md:table",children:(0,M.jsxs)("tbody",{children:[(0,M.jsxs)("tr",{className:"border-y bg-white dark:border-gray-700 dark:bg-gray-900",children:[(0,M.jsx)("td",{className:"bg-gray-50 py-1 px-3 text-left text-xs font-medium uppercase tracking-wider text-gray-700 dark:bg-gray-800 dark:text-gray-400",children:"Quick XOR"}),(0,M.jsx)("td",{className:"whitespace-nowrap py-1 px-3 font-mono text-gray-500 dark:text-gray-400",children:null!==(n=null===(a=l.file.hashes)||void 0===a?void 0:a.quickXorHash)&&void 0!==n?n:d("Unavailable")})]}),(0,M.jsxs)("tr",{className:"border-y bg-white dark:border-gray-700 dark:bg-gray-900",children:[(0,M.jsx)("td",{className:"bg-gray-50 py-1 px-3 text-left text-xs font-medium uppercase tracking-wider text-gray-700 dark:bg-gray-800 dark:text-gray-400",children:"SHA1"}),(0,M.jsx)("td",{className:"whitespace-nowrap py-1 px-3 font-mono text-gray-500 dark:text-gray-400",children:null!==(o=null===(i=l.file.hashes)||void 0===i?void 0:i.sha1Hash)&&void 0!==o?o:d("Unavailable")})]}),(0,M.jsxs)("tr",{className:"border-y bg-white dark:border-gray-700 dark:bg-gray-900",children:[(0,M.jsx)("td",{className:"bg-gray-50 py-1 px-3 text-left text-xs font-medium uppercase tracking-wider text-gray-700 dark:bg-gray-800 dark:text-gray-400",children:"SHA256"}),(0,M.jsx)("td",{className:"whitespace-nowrap py-1 px-3 font-mono text-gray-500 dark:text-gray-400",children:null!==(s=null===(c=l.file.hashes)||void 0===c?void 0:c.sha256Hash)&&void 0!==s?s:d("Unavailable")})]})]})})]})]})]})}),(0,M.jsx)(te.W,{children:(0,M.jsx)(K.Z,{})})]})},$e=r(61176),Ve=r(16767),We=r(91904),He=function(e){var t=e.fileContent;return(0,M.jsxs)("div",{className:"grid cursor-pointer grid-cols-10 items-center space-x-2 px-3 py-2.5",children:[(0,M.jsxs)("div",{className:"col-span-10 flex items-center space-x-2 truncate md:col-span-6",title:t.name,children:[(0,M.jsx)("div",{className:"w-5 flex-shrink-0 text-center",children:(0,M.jsx)(Qe,{child:t})}),(0,M.jsx)(Xe,{name:t.name,folder:Boolean(t.folder)})]}),(0,M.jsx)("div",{className:"col-span-3 hidden flex-shrink-0 font-mono text-sm text-gray-700 dark:text-gray-500 md:block",children:Pe(t.lastModifiedDateTime)}),(0,M.jsx)("div",{className:"col-span-1 hidden flex-shrink-0 truncate font-mono text-sm text-gray-700 dark:text-gray-500 md:block",children:Se(t.size)})]})},Ae=function(e){var t=e.path,r=e.folderChildren,n=(e.selected,e.toggleItemSelected,e.totalSelected,e.toggleTotalSelected,e.totalGenerating,e.handleSelectedDownload,e.folderGenerating),a=e.handleFolderDownload,o=e.toast,i=(0,Ge.useClipboard)(),s=(0,T.hV)(t),c=(0,v.$G)().t,l=function(e){return"".concat("/"===t?"":t,"/").concat(encodeURIComponent(e))};return r=r.filter((function(e){return null===e.name.match(new RegExp(We.hideFileRegex,"i"))})),(0,M.jsxs)("div",{className:"rounded bg-white dark:bg-gray-900 dark:text-gray-100",children:[(0,M.jsxs)("div",{className:"grid grid-cols-11 items-center space-x-2 border-b border-gray-900/10 px-3 dark:border-gray-500/30",children:[(0,M.jsx)("div",{className:"col-span-12 py-2 text-xs font-bold uppercase tracking-widest text-gray-600 dark:text-gray-300 md:col-span-6",children:c("Name")}),(0,M.jsx)("div",{className:"col-span-3 hidden text-xs font-bold uppercase tracking-widest text-gray-600 dark:text-gray-300 md:block",children:c("Last Modified")}),(0,M.jsx)("div",{className:"hidden text-xs font-bold uppercase tracking-widest text-gray-600 dark:text-gray-300 md:block",children:c("Size")}),(0,M.jsx)("div",{className:"hidden text-xs font-bold uppercase tracking-widest text-gray-600 dark:text-gray-300 md:block",children:c("Actions")})]}),r.map((function(e){return(0,M.jsxs)("div",{className:"grid grid-cols-11 transition-all duration-100 hover:bg-gray-100 dark:hover:bg-gray-850",children:[(0,M.jsx)($e.default,{href:"".concat("/"===t?"":t,"/").concat(encodeURIComponent(e.name)),passHref:!0,children:(0,M.jsx)("a",{className:"col-span-12 md:col-span-10",children:(0,M.jsx)(He,{fileContent:e})})}),e.folder?(0,M.jsxs)("div",{className:"hidden p-1.5 text-gray-700 dark:text-gray-400 md:flex",children:[(0,M.jsx)("span",{title:c("Copy folder permalink"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",onClick:function(){i.copy("".concat((0,ye.S)()).concat((0,Ve.I)("".concat("/"===t?"":t,"/").concat(encodeURIComponent(e.name))))),o(c("Copied folder permalink."),{icon:"\ud83d\udc4c"})},children:(0,M.jsx)(p.G,{icon:["far","copy"]})}),n[e.id]?(0,M.jsx)(et,{title:c("Downloading folder, refresh page to cancel"),style:"px-1.5 py-1"}):(0,M.jsx)("span",{title:c("Download folder"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",onClick:function(){var r="".concat("/"===t?"":t,"/").concat(encodeURIComponent(e.name));a(r,e.id,e.name)()},children:(0,M.jsx)(p.G,{icon:["far","arrow-alt-circle-down"]})})]}):(0,M.jsxs)("div",{className:"hidden p-1.5 text-gray-700 dark:text-gray-400 md:flex",children:[(0,M.jsx)("span",{title:c("Copy raw file permalink"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",onClick:function(){i.copy("".concat((0,ye.S)(),"/api/raw/?path=").concat((0,Ve.I)(l(e.name))).concat(s?"&odpt=".concat(s):"")),o.success(c("Copied raw file permalink."))},children:(0,M.jsx)(p.G,{icon:["far","copy"]})}),(0,M.jsx)("a",{title:c("Download file"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",href:"/api/raw/?path=".concat(l(e.name)).concat(s?"&odpt=".concat(s):""),children:(0,M.jsx)(p.G,{icon:["far","arrow-alt-circle-down"]})})]})]},e.id)}))]})},Be=function(e){var t,r=e.c,n=e.path,a=(0,T.hV)(n),o="folder"in r?null:"/api/thumbnail/?path=".concat(n,"&size=medium").concat(a?"&odpt=".concat(a):""),i=(0,u.useState)(!1),s=i[0],c=i[1];return(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsx)("div",{className:"h-32 overflow-hidden rounded border border-gray-900/10 dark:border-gray-500/30",children:o&&!s?(0,M.jsx)("img",{className:"h-full w-full object-cover object-top",src:o,alt:r.name,onError:function(){return c(!0)}}):(0,M.jsxs)("div",{className:"relative flex h-full w-full items-center justify-center rounded-lg",children:[(0,M.jsx)(Qe,{child:r}),(0,M.jsx)("span",{className:"absolute bottom-0 right-0 m-1 font-medium text-gray-700 dark:text-gray-500",children:null===(t=r.folder)||void 0===t?void 0:t.childCount})]})}),(0,M.jsxs)("div",{className:"flex items-start justify-center space-x-2",children:[(0,M.jsx)("span",{className:"w-5 flex-shrink-0 text-center",children:(0,M.jsx)(Qe,{child:r})}),(0,M.jsx)(Xe,{name:r.name,folder:Boolean(r.folder)})]}),(0,M.jsx)("div",{className:"truncate text-center font-mono text-xs text-gray-700 dark:text-gray-500",children:Pe(r.lastModifiedDateTime)})]})},_e=function(e){var t=e.path,r=e.folderChildren,n=e.selected,a=(e.toggleItemSelected,e.totalSelected),o=(e.toggleTotalSelected,e.totalGenerating),i=e.handleSelectedDownload,s=e.folderGenerating,c=e.handleFolderDownload,l=e.toast,d=(0,Ge.useClipboard)(),u=(0,T.hV)(t),x=(0,v.$G)().t,f=function(e){return"".concat("/"===t?"":t,"/").concat(encodeURIComponent(e))};return r=r.filter((function(e){return null===e.name.match(new RegExp(We.hideFileRegex,"i"))})),(0,M.jsxs)("div",{className:"rounded bg-white dark:bg-gray-900 dark:text-gray-100",children:[(0,M.jsxs)("div",{className:"flex items-center border-b border-gray-900/10 px-3 text-xs font-bold uppercase tracking-widest text-gray-600 dark:border-gray-500/30 dark:text-gray-400",children:[(0,M.jsx)("div",{className:"flex-1",children:x("{{count}} item(s)",{count:r.length})}),(0,M.jsx)("div",{className:"flex p-1.5 text-gray-700 dark:text-gray-400",children:o?(0,M.jsx)(et,{title:x("Downloading selected files, refresh page to cancel"),style:"p-1.5"}):(0,M.jsx)("button",{title:x("Download selected files"),className:"cursor-pointer rounded p-1.5 hover:bg-gray-300 disabled:cursor-not-allowed disabled:text-gray-400 disabled:hover:bg-white dark:hover:bg-gray-600 disabled:dark:text-gray-600 disabled:hover:dark:bg-gray-900",disabled:0===a,onClick:i,children:(0,M.jsx)(p.G,{icon:["far","arrow-alt-circle-down"],size:"lg"})})})]}),(0,M.jsx)("div",{className:"grid grid-cols-2 gap-3 p-3 md:grid-cols-4",children:r.map((function(e){return(0,M.jsxs)("div",{className:"group relative overflow-hidden rounded transition-all duration-100 hover:bg-gray-100 dark:hover:bg-gray-850",children:[(0,M.jsx)("div",{className:"absolute top-0 right-0 z-10 m-1 rounded bg-white/50 py-0.5 opacity-0 transition-all duration-100 group-hover:opacity-100 dark:bg-gray-900/50",children:e.folder?(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{title:x("Copy folder permalink"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",onClick:function(){d.copy("".concat((0,ye.S)()).concat(f(e.name))),l(x("Copied folder permalink."),{icon:"\ud83d\udc4c"})},children:(0,M.jsx)(p.G,{icon:["far","copy"]})}),s[e.id]?(0,M.jsx)(et,{title:x("Downloading folder, refresh page to cancel"),style:"px-1.5 py-1"}):(0,M.jsx)("span",{title:x("Download folder"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",onClick:c(f(e.name),e.id,e.name),children:(0,M.jsx)(p.G,{icon:["far","arrow-alt-circle-down"]})})]}):(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{title:x("Copy raw file permalink"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",onClick:function(){d.copy("".concat((0,ye.S)(),"/api/raw/?path=").concat(f(e.name)).concat(u?"&odpt=".concat(u):"")),l.success(x("Copied raw file permalink."))},children:(0,M.jsx)(p.G,{icon:["far","copy"]})}),(0,M.jsx)("a",{title:x("Download file"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",href:"".concat((0,ye.S)(),"/api/raw/?path=").concat(f(e.name)).concat(u?"&odpt=".concat(u):""),children:(0,M.jsx)(p.G,{icon:["far","arrow-alt-circle-down"]})})]})}),(0,M.jsx)("div",{className:"".concat(n[e.id]?"opacity-100":"opacity-0"," absolute top-0 left-0 z-10 m-1 rounded bg-white/50 py-0.5 group-hover:opacity-100 dark:bg-gray-900/50")}),(0,M.jsx)($e.default,{href:f(e.name),passHref:!0,children:(0,M.jsx)("a",{children:(0,M.jsx)(Be,{c:e,path:f(e.name)})})})]},e.id)}))})]})};function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Je=(0,m.default)((function(){return Promise.all([r.e(9100),r.e(682),r.e(5773)]).then(r.bind(r,45773))}),{ssr:!1,loadableGenerated:{webpack:function(){return[45773]}}}),Ke=function(e){var t=h()().exec(e);return{render:t&&!t.index,emoji:t}},Xe=function(e){var t=e.name,r=e.folder,n=function(e){var t=Ke(e),r=t.render,n=t.emoji;return r?e.replace(/[0-9][0-9][0-9]?#/,"").replace(n?n[0]:"","").trim():e}(t),a=r?"":(0,j.VT)(n),o=r?n:n.substring(0,n.length-a.length);return(0,M.jsx)("span",{className:"truncate before:float-right before:content-[attr(data-tail)]","data-tail":a,children:o})},Qe=function(e){var t=e.child,r=Ke(t.name),n=r.render,a=r.emoji;return n?(0,M.jsx)("span",{children:a?a[0]:"\ud83d\udcc1"}):(0,M.jsx)(p.G,{icon:t.file?(0,j.LP)(t.name,{video:Boolean(t.video)}):["far","folder"]})},et=function(e){var t=e.title,r=e.style;return(0,M.jsx)("span",{title:t,className:"".concat(r," rounded"),role:"status",children:(0,M.jsx)(B.H,{className:"svg-inline--fa inline-block h-4 w-4 animate-spin"})})},tt=function(e){var t,r,l,f=e.query,h=(0,u.useState)({}),m=h[0],G=h[1],L=(0,u.useState)(0),E=L[0],D=L[1],U=(0,u.useState)(!1),$=U[0],H=U[1],_=(0,u.useState)({}),Y=_[0],K=_[1],X=(0,g.useRouter)(),Q=(0,T.hV)(X.asPath),ee=(0,y.Z)("preferredLayout",A.$[0]),ne=(0,o.Z)(ee,2),ae=ne[0],oe=(ne[1],(0,v.$G)().t),ie=function(e){if(e){var t=e.path;return t?"/".concat("string"===typeof t?encodeURIComponent(t):t.map((function(e){return encodeURIComponent(e)})).join("/")):"/"}return"/"}(f),se=(0,I.E)(ie),ce=se.data,le=se.error,de=se.size,ue=se.setSize;if(le)return 403===le.status?(X.push("/onedrive-vercel-index-oauth/step-1"),(0,M.jsx)("div",{})):(0,M.jsx)(te.p,{children:401===le.status?(0,M.jsx)(J,{redirect:ie}):(0,M.jsx)(q,{errorMsg:JSON.stringify(le.message)})});if(!ce)return(0,M.jsx)(te.p,{children:(0,M.jsx)(B.Z,{loadingText:oe("Loading ...")})});var pe=ce?(t=[]).concat.apply(t,(0,a.Z)(ce)):[],xe=!ce&&!le||de>0&&ce&&"undefined"===typeof ce[de-1],fe=0===(null===ce||void 0===ce||null===(r=ce[0])||void 0===r?void 0:r.length)||ce&&"undefined"===typeof(null===(l=ce[ce.length-1])||void 0===l?void 0:l.next),me=ce&&"undefined"===typeof ce[0].next;if("folder"in pe[0]){var ve,ye=(ve=[]).concat.apply(ve,(0,a.Z)(pe.map((function(e){return e.folder.value})))),be=ye.find((function(e){return"readme.md"===e.name.toLowerCase()})),we=function(){return ye.filter((function(e){return!e.folder&&".password"!==e.name}))},ke=function(e){var t=we().map((function(t){return Boolean(e[t.id])})),r=[t.some((function(e){return e})),t.some((function(e){return!e}))],n=r[1];return r[0]&&n?1:n?0:2},Ne={toast:x.ZP,path:ie,folderChildren:ye,selected:m,toggleItemSelected:function(e){var t;m[e]?delete(t=Ye({},m))[e]:t=Ye(Ye({},m),{},(0,n.Z)({},e,!0)),G(t),D(ke(t))},totalSelected:E,toggleTotalSelected:function(){2==ke(m)?(G({}),D(0)):(G(Object.fromEntries(we().map((function(e){return[e.id,!0]})))),D(2))},totalGenerating:$,handleSelectedDownload:function(){var e=ie.substring(ie.lastIndexOf("/")+1),t=e?decodeURIComponent(e):void 0,r=we().filter((function(e){return m[e.id]})).map((function(e){return{name:e.name,url:"/api/raw/?path=".concat(ie,"/").concat(e.name).concat(Q?"&odpt=".concat(Q):"")}}));if(1==r.length){var n=document.createElement("a");n.style.display="none",document.body.appendChild(n),n.href=r[0].url,n.click(),n.remove()}else if(r.length>1){H(!0);var a=x.ZP.loading((0,M.jsx)(z,{router:X}));(function(e){return V.apply(this,arguments)})({toastId:a,router:X,files:r,folder:t}).then((function(){H(!1),x.ZP.success(oe("Finished downloading selected files."),{id:a})})).catch((function(){H(!1),x.ZP.error(oe("Failed to download selected files."),{id:a})}))}},folderGenerating:Y,handleFolderDownload:function(e,t,r){return function(){(0,s.Z)(d().mark((function t(){var r,n,a,o,s,l,u,p,f;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,n=!1,t.prev=2,o=(0,c.Z)(W(e));case 4:return t.next=6,(0,i.Z)(o.next());case 6:if(!(r=!(s=t.sent).done)){t.next=16;break}if(l=s.value,u=l.meta,p=l.isFolder,!(f=l.error)){t.next=11;break}return x.ZP.error(oe("Failed to download folder {{path}}: {{status}} {{message}} Skipped it to continue.",{status:f.status,message:f.message})),t.abrupt("continue",13);case 11:return t.next=13,{name:null===u||void 0===u?void 0:u.name,isFolder:p};case 13:r=!1,t.next=4;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(2),n=!0,a=t.t0;case 22:if(t.prev=22,t.prev=23,!r||null==o.return){t.next=27;break}return t.next=27,(0,i.Z)(o.return());case 27:if(t.prev=27,!n){t.next=30;break}throw a;case 30:return t.finish(27);case 31:return t.finish(22);case 32:case"end":return t.stop()}}),t,null,[[2,18,22,32],[23,,27,31]])})))();K(Ye(Ye({},Y),{},(0,n.Z)({},t,!0)));x.ZP.loading((0,M.jsx)(z,{router:X}))}}};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(x.x7,{}),"Grid"===ae.name?(0,M.jsx)(_e,Ye({},Ne)):(0,M.jsx)(Ae,Ye({},Ne)),!me&&(0,M.jsxs)("div",{className:"rounded-b bg-white dark:bg-gray-900 dark:text-gray-100",children:[(0,M.jsx)("div",{className:"border-b border-gray-200 p-3 text-center font-mono text-sm text-gray-400 dark:border-gray-700",children:oe("- showing {{count}} page(s) ",{count:de,totalFileNum:xe?"...":ye.length})+oe("of {{count}} file(s) -",xe?{count:ye.length,context:"loading"}:{count:ye.length,context:"loaded"})}),(0,M.jsx)("button",{className:"flex w-full items-center justify-center space-x-2 p-3 disabled:cursor-not-allowed ".concat(xe||fe?"opacity-60":"hover:bg-gray-100 dark:hover:bg-gray-850"),onClick:function(){return ue(de+1)},disabled:xe||fe,children:xe?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(B.H,{className:"inline-block h-4 w-4 animate-spin"}),(0,M.jsx)("span",{children:oe("Loading ...")})," "]}):fe?(0,M.jsx)("span",{children:oe("No more files")}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{children:oe("Load more")}),(0,M.jsx)(p.G,{icon:"chevron-circle-down"})]})})]}),be&&(0,M.jsx)("div",{className:"mt-4",children:(0,M.jsx)(he,{file:be,path:ie,standalone:!1,proxy:!0})})]})}if("file"in pe[0]&&1===pe.length){var Ce=pe[0].file,Ze=function(e,t){var r=F[e];return r?("ts"===e&&null!==t&&void 0!==t&&t.video&&(r=Z),r):r}((0,j.RT)(Ce.name),{video:Boolean(Ce.video)});if(!Ze)return(0,M.jsx)(ze,{file:Ce});switch(Ze){case w:return(0,M.jsx)(Me,{file:Ce});case k:return(0,M.jsx)(re,{file:Ce});case C:return(0,M.jsx)(ge,{file:Ce});case b:return(0,M.jsx)(he,{file:Ce,path:ie});case Z:return(0,M.jsx)(Le,{file:Ce});case S:return(0,M.jsx)(Oe,{file:Ce});case N:return(0,M.jsx)(Ee,{file:Ce});case P:return(0,M.jsx)(je,{file:Ce});case O:return(0,M.jsx)(Je,{file:Ce});case R:return(0,M.jsx)(Ue,{file:Ce});default:return(0,M.jsx)(ze,{file:Ce})}}return(0,M.jsx)(te.p,{children:(0,M.jsx)(q,{errorMsg:oe("Cannot preview {{path}}",{path:ie})})})}},48099:function(e,t,r){r.d(t,{$:function(){return u}});var n=r(19922),a=r(59496),o=r(60385),i=r(98296),s=r(74792),c=r(4313),l=r(18318),d=r(4637),u=[{id:1,name:"List",icon:"th-list"},{id:2,name:"Grid",icon:"th"}];t.Z=function(){var e=(0,l.Z)("preferredLayout",u[0]),t=(0,n.Z)(e,2),r=t[0],p=t[1],x=(0,c.$G)().t;return(0,d.jsx)("div",{className:"relative w-24 flex-shrink-0 text-sm text-gray-600 dark:text-gray-300 md:w-28",children:(0,d.jsxs)(i.R,{value:r,onChange:p,children:[(0,d.jsxs)(i.R.Button,{className:"relative w-full cursor-pointer rounded pl-2",children:[(0,d.jsxs)("span",{className:"pointer-events-none flex items-center",children:[(0,d.jsx)(o.G,{className:"mr-2 h-3 w-3",icon:r.icon}),(0,d.jsx)("span",{children:x(r.name)})]}),(0,d.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,d.jsx)(o.G,{className:"h-3 w-3",icon:"chevron-down"})})]}),(0,d.jsx)(s.u,{as:a.Fragment,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:(0,d.jsx)(i.R.Options,{className:"absolute right-0 z-20 mt-1 w-32 overflow-auto rounded border border-gray-900/10 bg-white py-1 shadow-lg focus:outline-none dark:border-gray-500/30 dark:bg-gray-800",children:u.map((function(e){return(0,d.jsxs)(i.R.Option,{className:"".concat(e.name===r.name&&"bg-blue-50 text-blue-700 dark:bg-blue-600/10 dark:text-blue-400"," relative flex cursor-pointer select-none items-center py-1.5 pl-3 text-gray-600 hover:opacity-80 dark:text-gray-300"),value:e,children:[(0,d.jsx)(o.G,{className:"mr-2 h-3 w-3",icon:e.icon}),(0,d.jsx)("span",{className:e.name===r.name?"font-medium":"font-normal",children:x(e.name)}),e.name===r.name&&(0,d.jsx)("span",{className:"absolute inset-y-0 right-3 flex items-center",children:(0,d.jsx)(o.G,{className:"h-3 w-3",icon:"check"})})]},e.id)}))})})]})})}},72364:function(e,t,r){r.d(t,{p:function(){return a},W:function(){return o}});var n=r(4637);function a(e){var t=e.children;return(0,n.jsx)("div",{className:"rounded bg-white p-3 dark:bg-gray-900 dark:text-white",children:t})}function o(e){var t=e.children;return(0,n.jsx)("div",{className:"sticky bottom-0 left-0 right-0 z-10 rounded border-t border-gray-900/10 bg-white bg-opacity-80 p-2 backdrop-blur-md dark:border-gray-500/30 dark:bg-gray-900",children:t})}},72408:function(e,t,r){function n(){return window.location.origin}r.d(t,{S:function(){return n}})},16767:function(e,t,r){function n(e){return e=e.split("/").map((function(e){return decodeURIComponent(e)})).map((function(e){return Array.from(e).map((function(e){return function(e){if(e.charCodeAt(0)<128){if(/^[a-zA-Z0-9\-._~]$/.test(e))return!0;if(/^[*:@,!]$/.test(e))return!0}else if(!/\s|\u180e/.test(e))return!0;return!1}(e)?e:encodeURIComponent(e)})).join("")})).join("/")}r.d(t,{I:function(){return n}})},18318:function(e,t,r){var n=r(59496);t.Z=function(e,t){var r=function(){try{var r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(n){return console.warn("Error reading localStorage key \u201c".concat(e,"\u201d:"),n),t}},a=(0,n.useState)(r),o=a[0],i=a[1];return(0,n.useEffect)((function(){i(r())}),[]),(0,n.useEffect)((function(){var e=function(){i(r())};return window.addEventListener("storage",e),window.addEventListener("local-storage",e),function(){window.removeEventListener("storage",e),window.removeEventListener("local-storage",e)}}),[]),[o,function(t){try{var r=t instanceof Function?t(o):t;window.localStorage.setItem(e,JSON.stringify(r)),i(r),window.dispatchEvent(new Event("local-storage"))}catch(n){console.warn("Error setting localStorage key \u201c".concat(e,"\u201d:"),n)}}]}}}]);